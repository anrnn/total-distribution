<!DOCTYPE html>
<html lang="mn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ê–∂–ª—ã–Ω –±–∞–π—Ä</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .job-card {
      background-color: #ffffff;
      color: black;
      padding: 10px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(219, 207, 207, 0.187);
      margin: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .hidden {
      display: none;
    }
    .location-button {
      background-color: #04bfe0;
      color: white;
      border: none;
      border-radius: 8px;
      padding: 5px 10px;
      margin-top: 5px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .location-button:hover {
      background-color: #029bb2;
    }
  </style>
</head>
<body>
  <header class="header">
    <a href="index2.html"><img src="image/logo.png" class="logo" alt="–õ–æ–≥–æ"></a>
        <div class="menu-toggle" id="menu-toggle">&#9776;</div>
        <nav class="nav-bar" id="nav-bar">
            <a href="about.html">–ë–∏–¥–Ω–∏–π —Ç—É—Ö–∞–π</a>
            <a href="news.html">–ú—ç–¥—ç—ç</a>
            <a href="#service">“Æ–π–ª—á–∏–ª–≥—ç—ç</a>
            <a href="https://www.zangia.mn/company/totaldistributionllc">–ê–∂–ª—ã–Ω –±–∞–π—Ä</a>
        </nav>
  </header>

  <h1>–ù—ç—ç–ª—Ç—Ç—ç–π –∞–∂–ª—ã–Ω –±–∞–π—Ä</h1>
  <div style="display: flex; gap: 20px;">
    <aside style="width: 300px;">
      <label>–ë–∞–π—Ä—à–∏–ª:</label>
      <select id="locationFilter" onchange="filterJobs()">
        <option value="all">- - - - - - -</option>
        <option value="–£–ª–∞–∞–Ω–±–∞–∞—Ç–∞—Ä">–£–ª–∞–∞–Ω–±–∞–∞—Ç–∞—Ä</option>
        <option value="–î–∞—Ä—Ö–∞–Ω">–î–∞—Ä—Ö–∞–Ω</option>
      </select><br><br>

      <div style="margin-top: 10px;">
        <strong>üìç –ë–∞–π—Ä—à–ª–∞–∞—Ä —Ö–∞—Ä–∞—Ö:</strong>
        <ul style="list-style: none; padding-left: 0;">
          <li><button onclick="filterByClick('–£–ª–∞–∞–Ω–±–∞–∞—Ç–∞—Ä')" class="location-button">–£–ª–∞–∞–Ω–±–∞–∞—Ç–∞—Ä</button></li>
          <li><button onclick="filterByClick('–î–∞—Ä—Ö–∞–Ω')" class="location-button">–î–∞—Ä—Ö–∞–Ω</button></li>
        </ul>
      </div>

      <label style="margin-top: 20px; display: block;">–ú—ç—Ä–≥—ç–∂–ª–∏–π–Ω —á–∏–≥–ª—ç–ª:</label>
      <select id="professionFilter" onchange="filterJobs()">
        <option value="all"> - - - </option>
        <option value="–ù—è–≥—Ç–ª–∞–Ω –±–æ–¥–æ—Ö">–ù—è–≥—Ç–ª–∞–Ω –±–æ–¥–æ—Ö</option>
        <option value="–ò–Ω–∂–µ–Ω–µ—Ä">–ò–Ω–∂–µ–Ω–µ—Ä</option>
      </select><br><br>
    </aside>

    <div id="jobList" style="flex: 2;"></div>

    <div id="applicationFormContainer" style="display:none;">
      <h2>–ê–Ω–∫–µ—Ç –±”©–≥–ª”©—Ö</h2>
      <form id="applicationForm">
        <div id="questionFields"></div>
        <button type="submit">–ò–ª–≥—ç—ç—Ö</button>
      </form>
    </div>
  </div>

  <footer>
    <div class="footer-container">
      <div class="footer-contact">
        <h4>–ö–æ–º–ø–∞–Ω–∏</h4>
        <p><a href="about.html">–ë–∏–¥–Ω–∏–π —Ç—É—Ö–∞–π</a></p>
        <p><a href="hire.html">–ê–∂–ª—ã–Ω –±–∞–π—Ä</a></p>
      </div>

      <div class="footer-social">
        <h4>–•–æ–ª–±–æ–æ –±–∞—Ä–∏—Ö</h4>
        <p>üìû –£—Ç–∞—Å: +976 99112233</p>
        <p>‚úâÔ∏è –ò–º—ç–π–ª: info@example.mn</p>
        <p>üìç –ë–∞–π—Ä—à–∏–ª: –£–ª–∞–∞–Ω–±–∞–∞—Ç–∞—Ä, –ú–æ–Ω–≥–æ–ª</p>
        <a href="https://www.facebook.com/TotalDistributionLLC/" target="_blank"><img src="facebook.png" class="fbIcon"></a>
      </div>
    </div>
    <p class="copyright">¬© 2025 TOTAL DISTRIBUTION</p>
  </footer>

  <script>
    const jobs = JSON.parse(localStorage.getItem('jobs') || '[]');
    const jobList = document.getElementById('jobList');
    const formContainer = document.getElementById('applicationFormContainer');
    const questionFields = document.getElementById('questionFields');
    const form = document.getElementById('applicationForm');

    function filterJobs() {
      const selectedLocation = document.getElementById("locationFilter").value;
      const selectedProfession = document.getElementById("professionFilter").value;
      const cards = document.querySelectorAll(".job-card");

      cards.forEach(card => {
        const location = card.getAttribute("data-location");
        const profession = card.getAttribute("data-profession");
        const matchesLocation = selectedLocation === "all" || location === selectedLocation;
        const matchesProfession = selectedProfession === "all" || profession === selectedProfession;

        if (matchesLocation && matchesProfession) {
          card.classList.remove("hidden");
        } else {
          card.classList.add("hidden");
        }
      });
    }

    function filterByClick(location) {
      document.getElementById("locationFilter").value = location;
      filterJobs();
    }

    function toggleDropdown(card) {
      const dropdown = card.querySelector('.dropdown');
      dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
    }

    jobs.forEach(job => {
      const div = document.createElement('div');
      div.className = 'job-card';
      div.setAttribute('data-location', job.location);
      div.setAttribute('data-profession', job.profession);
      div.setAttribute('onclick', 'toggleDropdown(this)');

      div.innerHTML = `
        <strong>${job.title}</strong><br>
        <small>üóìÔ∏è: ${job.deadline} &nbsp;&nbsp;&nbsp;üìç: ${job.location}</small>
        <div class="dropdown" style="display: none;">
          <p><strong>–®–∞–∞—Ä–¥–ª–∞–≥–∞:</strong></p>
          <p>${job.requirements}</p>
          <a href="application.html?id=${job.id}"><button>–ê–Ω–∫–µ—Ç –±”©–≥–ª”©—Ö</button></a>
        </div>
      `;
      jobList.appendChild(div);
    });

    form.addEventListener('submit', function(e) {
      e.preventDefault();

      const jobId = parseInt(form.getAttribute('data-job-id'));
      const formData = new FormData(form);
      const data = { jobId };

      for (let [key, value] of formData.entries()) {
        data[key] = value;
      }

      const applications = JSON.parse(localStorage.getItem('applications') || '[]');
      applications.push(data);
      localStorage.setItem('applications', JSON.stringify(applications));

      alert('–ê–Ω–∫–µ—Ç –∞–º–∂–∏–ª—Ç—Ç–∞–π –∏–ª–≥—ç—ç–≥–¥–ª—ç—ç!');
      form.reset();
      formContainer.style.display = 'none';
    });
  </script>
</body>
</html>
